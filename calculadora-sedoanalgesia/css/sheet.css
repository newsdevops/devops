/* sheet.css v20260128-1  */

/* =========================================================
   sheet.css (refactor por secciones)
   - Ordenado por secciones para mantenimiento.
   - Valores y selectores preservados; solo se reagrupan bloques.
   - Recomendación: smoke test rápido en móvil/desktop tras sustituir el CSS.
   ========================================================= */

/* ÍNDICE: BASE · HEADER · SECCIONES · TABLAS · NAVEGACIÓN · CONTROLES FÁRMACO · CARDS · CHECKLIST · TEMA/DARK · PRINT · FIXES */


/* =========================
   1) HEADER
   ========================= */

/* =========================
   HEADER
   ========================= */
.app-header{
  position:sticky;
  top:0;
  z-index:300;
  background:rgba(255,255,255,.92);
  backdrop-filter:saturate(1.2) blur(8px);
  padding:.75rem 1rem;
  border-bottom:1px solid var(--border);
}
.app-header .row{
  display:flex;
  gap:1rem;
  align-items:center;
  justify-content:space-between;
}
.left-controls{
  display:flex;
  align-items:center;
  gap:.75rem;
}

.peso-box{
  display:flex;
  gap:.5rem;
  align-items:center;
  background:#f3f4f6;
  border:1px solid var(--border);
  padding:.4rem .6rem;
  border-radius:.6rem;
  margin-left:auto;
  margin-right:var(--table-pad);
}
.peso-box input{
  width:4rem;
  max-width:15vw;
  padding:.40rem .6rem;
  border-radius:.5rem;
  border:1px solid var(--border);
  background:#fff;
  color:var(--text);
}

main{ max-width:1100px; margin:0 auto; padding:1rem }

/* =========================
   PRINT
   ========================= */
@media print{
  .app-header{ position:static; backdrop-filter:none; border-bottom:none }
  .sheet thead{ position:static }
  .sheet tbody::before{ content:none; height:0 }
  .section{ box-shadow:none; border:none }
  body{ background:#fff }
}

/* =========================
   VISTA TRASPUESTA (modo estrecho)
   ========================= */

.cards-wrap{
  display:none;
  padding: var(--table-pad);
}

/* Card por fármaco */
.drug-card{
  background:#fff;
  border:1px solid var(--border);
  border-radius:1rem;
  box-shadow:0 8px 22px rgba(0,0,0,.06);
  overflow:hidden;
  margin-bottom: .9rem;
}

.drug-card__title{
  font-weight:900;
  padding:.65rem .85rem;
  border-bottom:1px solid var(--border);
  text-transform:uppercase;
  letter-spacing:.02em;
}

/* Grid traspuesto:
   1ª columna = etiquetas
   columnas 2..n = “líneas” del fármaco (1–3)
*/
/* .tgrid duplicado eliminado (se mantiene una sola definición) */
.tgrid__cell{ padding:.48rem .55rem; border-top:1px solid var(--border,#e5e7eb);
  min-width:0; overflow-wrap:anywhere;

  }

.tgrid__label{
  font-weight: 700;
  color:#374151;
  background:#f8fafc;

  font-size: .72rem;
  letter-spacing: .02em;
}
/* Cabecera de columnas (arriba) */
.tgrid__colhead{
  font-weight:900;
  text-transform:uppercase;
  background:#ffffff;
}

/* Reutilizamos tus clases de color ya existentes */
.tgrid__cell.dose{ background:#9FC5E8; 
  font-size: 1.2rem;     /* <-- DOSIS (MG) */
  font-weight: 700;
 }
.tgrid__cell.vol{ background:#9BBB59; 
  font-size: 1.2rem;     /* <-- DOSIS (ML) */
  font-weight: 700;
 }

.tgrid__cell.limits{
  background:#DD7E6B;
  text-align:center;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  
  font-size: 1rem;     /* <-- DOSIS (MAX) */
  font-weight: 600;

}


/* Clamp (si lo aplicas) */
.tgrid__cell.clamped-max{ background:#fee2e2 !important; color:#7f1d1d; }
.tgrid__cell.clamped-min{ background:#ffedd5 !important; color:#78350f; }

/* Via */
.tgrid__cell.via-iv{ color:var(--via-iv); font-weight:400; }
.tgrid__cell.via-in{ color:var(--via-in); font-weight:400; }
.tgrid__cell.via-im{ color:var(--via-im); font-weight:400; }

/* Modo estrecho: se ve la traspuesta y se oculta la tabla */
@media (max-width: 900px){
  /* SOLO sedoanalgesia: ocultar tablas y mostrar cards */
  #section-sedantes .table-wrap,
  #section-antidotos .table-wrap{
    display:none !important;
  }

  #section-sedantes .cards-wrap,
  #section-antidotos .cards-wrap{
    display:block;
  }

  /* Sueroterapia: mantener tablas visibles */
  #section-sueroterapia .table-wrap{
    display:block !important;
  }
}

/* Sueroterapia: header y subtabs en móvil (evitar desbordes) */
@media (max-width: 900px){
  #section-sueroterapia .section-header--with-filter{
    display:flex;
    flex-wrap: wrap;
    gap: .6rem;
  }

  #section-sueroterapia .suero-subtabs{
    margin-left: 0;
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: .2rem;
  }

  #section-sueroterapia .suero-subtabs .menu-item{
    flex: 0 0 auto; /* que no se estiren raro */
    white-space: nowrap;
  }
}
/* --- Complementos necesarios para que el JS de cards funcione al 100% --- */

/* Contenedor interno de la card (JS lo crea como .drug-card__body) */
.drug-card__body{
  overflow-x: visible;
  -webkit-overflow-scrolling: touch;
}

/* Solo si el fármaco tiene 3+ columnas, el JS añade .is-scroll */
.drug-card__body.is-scroll{
  overflow-x: auto;
}

/* El JS setea --cols y, cuando hay 3+ columnas, también --col-min */
.tgrid{
  --cols: 1;
  --col-min: 105px;
  display: grid;
  width: 100%;
  grid-template-columns: 135px repeat(var(--cols), minmax(var(--col-min), 1fr));
}

/* Separador vertical tenue entre columnas de datos (no en la columna de etiquetas) */
.tgrid__cell:not(.tgrid__label){
  border-left: 1px solid rgba(148,163,184,.45);
}

/* Sticky horizontal: fija la columna de etiquetas cuando hay scroll horizontal */
.drug-card__body.is-scroll .tgrid__label,
.drug-card__body.is-scroll .tgrid__corner{
  position: sticky;
  left: 0;
  z-index: 25;
  background: #f8fafc;
  box-shadow: 10px 0 14px -12px rgba(15,23,42,.35);
}
.drug-card__body.is-scroll .tgrid__corner{
  background: #fff;
  z-index: 30;
}

/* Etiquetas un pelín más “compactas” (como en el CSS inyectado) */
/* .tgrid__label duplicado eliminado */
/* ===== Header fijo en modo estrecho (como antes) ===== */
@media (max-width: 900px){
  .app-header{
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 300; /* mantiene la prioridad que ya tienes */
  }

  /* Evita que el contenido quede “debajo” del header fijo */
  body{
    padding-top: var(--app-header-h, 72px);
  }
  
  .sheet tbody tr td{
		font-size: 1.0rem;   /* resto de valores en móvil */
		font-weight: 500;
	  }

	  .sheet tbody td.dose,
	  .sheet tbody td.vol,
	  .sheet tbody td.limits{
		font-size: 1.05rem;  /* columnas clave en móvil */
		font-weight: 800;
	  }
}

/* =========================================================
   TEMA OSCURO + ACCESIBILIDAD
   ========================================================= */

/* 1) Base: que el navegador sepa que soportas ambos */
:root {
  color-scheme: light dark;
}

/* 2) Tema oscuro (manual via JS) */
:root[data-theme="dark"]{
  --bg:#0b1220;
  --surface:#0f172a;
  --text:#e5e7eb;
  --muted:#a1a1aa;
  --accent:#60a5fa;
  --border: rgba(148,163,184,.22);

  /* Pastillas */
  --sed:#34d399;
  --ant:#fbbf24;

  /* Vías (un poco más visibles en dark) */
  --via-iv:#ff6b6b;
  --via-in:#60a5fa;
  --via-im:#a3e635;
}

/* 3) Si NO hay tema guardado, usa preferencia del sistema (opcional) */
@media (prefers-color-scheme: dark){
  :root:not([data-theme]){
    --bg:#0b1220;
    --surface:#0f172a;
    --text:#e5e7eb;
    --muted:#a1a1aa;
    --accent:#60a5fa;
    --border: rgba(148,163,184,.22);
    --sed:#34d399;
    --ant:#fbbf24;
    --via-iv:#ff6b6b;
    --via-in:#60a5fa;
    --via-im:#a3e635;
  }
}

/* 4) Aplica variables a superficies principales */
body{
  background: var(--bg);
  color: var(--text);
}

.section,
.app-header,
.table-wrap,
.drug-card,
.ck-line,
.side-menu{
  background: var(--surface);
  border-color: var(--border);
}

/* 5) Textos secundarios */
.disclaimer, .help{
  color: var(--muted);
}

/* 6) Focus visible accesible (teclado) */
:focus{
  outline: none;
}

:focus-visible{
  outline: 3px solid rgba(96,165,250,.55);
  outline-offset: 3px;
  border-radius: 10px;
}

/* =========================
   HEADER + TEXTO AYUDA
   ========================= */
:root[data-theme="dark"] .app-header{
  background: rgba(15,23,42,.92);
  border-bottom: 1px solid var(--border);
}
:root[data-theme="dark"] .disclaimer,
:root[data-theme="dark"] .help{
  color: rgba(226,232,240,.75);
}

/* =========================================================
   HOTFIX DARK - VISTA ESTRECHA (CARDS)
   - Recupera colores de DOSE/VOL/LIMITS en cards
   - Mantiene texto negro en esas celdas
   - Arregla el botón hamburguesa en dark
   ========================================================= */

/* 1) HAMBURGUESA: fondo oscuro real en modo noche */
:root[data-theme="dark"] button#menuBtn.menu-btn,
:root[data-theme="dark"] .app-header .menu-btn{
  background: rgba(255,255,255,.06) !important;
  border-color: rgba(148,163,184,.25) !important;
}
:root[data-theme="dark"] .app-header .menu-icon,
:root[data-theme="dark"] .app-header .menu-icon::before,
:root[data-theme="dark"] .app-header .menu-icon::after{
  background: rgba(226,232,240,.92) !important;
}

/* 2) CARDS: no pises el fondo por defecto de las celdas clave */
:root[data-theme="dark"] .tgrid__cell.dose,
:root[data-theme="dark"] .tgrid__cell.vol,
:root[data-theme="dark"] .tgrid__cell.limits{
  /* recupera los fondos originales (los tuyos de modo claro) */
  background: unset !important;
}

/* 3) CARDS: fuerza los fondos EXACTOS de tus columnas coloreadas */
:root[data-theme="dark"] .tgrid__cell.dose{
  background: #9FC5E8 !important;   /* azul dosis (mg) */
  color: #000 !important;          /* texto negro como querías */
}
:root[data-theme="dark"] .tgrid__cell.vol{
  background: #9BBB59 !important;   /* verde dosis (ml) */
  color: #000 !important;           /* texto negro como querías */
}
:root[data-theme="dark"] .tgrid__cell.limits{
  background: #DD7E6B !important;   /* rojo dosis máx */
  color: #000 !important;           /* texto negro como querías */
}

/* 4) CARDS: el resto de celdas sí pueden ir en dark sin tocar las coloreadas */
:root[data-theme="dark"] .tgrid__cell:not(.dose):not(.vol):not(.limits):not(.tgrid__label){
  background: rgba(15,23,42,.55) !important;
  color: rgba(226,232,240,.92) !important;
  border-top-color: rgba(148,163,184,.18) !important;
}

/* 5) Labels (columna izquierda) en dark */
:root[data-theme="dark"] .tgrid__label{
  background: rgba(2,6,23,.35) !important;
  color: rgba(226,232,240,.88) !important;
  border-top-color: rgba(148,163,184,.22) !important;
}

@media (max-width: 760px){
  .peso-badge{
    max-width: none !important;
    overflow: visible !important;
    text-overflow: unset !important;
    white-space: nowrap !important;
  }
}

/* =========================================================
   MÓVIL: evitar que se oculten el badge y el botón de tema
   ========================================================= */
@media (max-width: 760px){
  .app-header .row{
    flex-wrap: wrap;            /* permite salto de línea */
    gap: .6rem .75rem;
  }

  /* Peso-box no empuja fuera de pantalla */
  .peso-box{
    margin-left: 0;
    margin-right: 0;
    flex: 1 1 220px;            /* ocupa una línea si hace falta */
  }

  /* Badge y botón tema siempre visibles */
  .peso-badge{
    flex: 0 0 auto;
    max-width: none !important;
    overflow: visible !important;
    text-overflow: unset !important;
    white-space: nowrap !important;
  }

  #themeToggle.icon-btn{
    flex: 0 0 auto;
  }
}


/* =========================
   2) SECCIONES (contenedores)
   ========================= */

/* =========================
   SECCIONES
   ========================= */
.section{
  margin:1rem 0 1.25rem;
  background:#fff;
  border:1px solid var(--border);
  border-radius:1rem;
  overflow:hidden;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
}

.section-header{
  display:flex;
  align-items:center;
  gap:.75rem;
  padding:.6rem .9rem;
  border-bottom:1px solid var(--border);
  background:#fff;
}

.section-header .pill{
  padding:.2rem .6rem;
  border-radius:999px;
  font-weight:600;
  border:1px solid var(--border);
}
.section-header .pill.sed{ background:#ecfdf5; color:#065f46 }
.section-header .pill.ant{ background:#fffbeb; color:#92400e }


.section-header .pill.seu{ background:#eef2ff; color:#3730a3; }
:root[data-theme="dark"] .section-header .pill.seu{
  background: rgba(129,140,248,.16);
  color: #c7d2fe;
}




/* =========================
   DROPDOWN MODERNO DE FÁRMACOS (móvil/ventana estrecha)
   ========================= */
.drug-dd{
  display:none;      /* se activa en @media */
  margin-left:auto;
  position:relative;
}

.drug-dd__btn{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:.5rem;
  border:1px solid var(--border);
  background:#fff;
  color:var(--text);
  font-weight:800;
  padding:.42rem .7rem;
  border-radius:.8rem;
  cursor:pointer;
  min-height:38px;
  box-shadow:0 1px 0 rgba(0,0,0,.03);
  transition:box-shadow .15s ease, transform .15s ease, border-color .15s ease;
}
.drug-dd__btn:hover{ box-shadow:0 6px 18px rgba(0,0,0,.08); border-color:#d1d5db }
.drug-dd__btn:active{ transform:translateY(1px) }
.drug-dd__btn:focus{ outline:2px solid rgba(37,99,235,.35); outline-offset:2px }

.drug-dd__label{
  text-transform:uppercase;
  white-space:nowrap;
  max-width:52vw;
  overflow:hidden;
  text-overflow:ellipsis;
}
.drug-dd__chev{ display:none; }

.drug-dd__panel{
  position:absolute;
  left:50%;
  top:calc(100% + .5rem);
  transform:translateX(-50%);
  width:min(260px, 75vw);
  max-height: min(320px, calc(100vh - 180px));
  overflow:auto;
  overscroll-behavior: contain;
  background:#fff;
  border:1px solid var(--border);
  border-radius:.9rem;
  box-shadow:0 18px 45px rgba(0,0,0,.18);
  padding:.35rem;
  display:none;
  z-index:2000;
}

.drug-dd.is-open .drug-dd__panel{ display:block }
.drug-dd.is-open .drug-dd__chev{ transform:rotate(180deg) }

.drug-dd__opt{
  width:100%;
  text-align:left;
  padding:.55rem .65rem;
  border-radius:.75rem;
  border:1px solid transparent;
  background:transparent;
  cursor:pointer;
  font-weight:800;
  color:#111827;
  text-transform:uppercase;
  white-space:nowrap;
}
.drug-dd__opt:hover{ background:#f3f4f6 }
.drug-dd__opt.is-active{ background:rgba(37,99,235,.14); border-color:rgba(37,99,235,.55) }

/* Ventana estrecha/móvil: ocultar botones, mostrar dropdown */
@media (max-width: 900px){
  /* Evita que el panel del dropdown quede recortado por .section (overflow:hidden) */
  .section{ overflow: visible; }

  .drug-submenu{ display:none !important }
  .drug-dd{ display:block !important }
}
/* Centrar el selector de fármacos en modo estrecho */
@media (max-width: 900px){
  .section-header--with-filter{
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
  }
  .section-header--with-filter .pill{
    justify-self: start;
  }
  .section-header--with-filter .drug-dd{
    justify-self: center;
    margin-left: 0;
  }
}


/* Ajustes extra en móvil */
@media (max-width: 760px){
  .peso-box input{ width:6.5rem }
  .sheet{ min-width:900px }
  .sheet tbody tr td{ padding:.5rem .55rem; font-size:.95rem }
  .sheet thead th{ font-size:.75rem }
  
#ckVerifyOverlay{
    padding: .75rem; /* menos margen lateral en móvil */
  }
  #ckVerifyOverlay .ck-modal{
    width: min(560px, calc(100vw - 1.5rem)); /* 2 * .75rem */
  }

	

}

/* =========================
   SECCIONES (tarjetas blancas)
   ========================= */
:root[data-theme="dark"] .section{
  background: rgba(15,23,42,.92);
  border-color: var(--border);
  box-shadow: 0 10px 25px rgba(0,0,0,.35);
}
:root[data-theme="dark"] .section-header{
  background: rgba(2,6,23,.35);
  border-bottom-color: var(--border);
}

/* Pills sed/ant/chk */
:root[data-theme="dark"] .section-header .pill{
  border-color: rgba(148,163,184,.22);
}
:root[data-theme="dark"] .section-header .pill.sed{
  background: rgba(16,185,129,.14);
  color: #86efac;
}
:root[data-theme="dark"] .section-header .pill.ant{
  background: rgba(245,158,11,.16);
  color: #fcd34d;
}
:root[data-theme="dark"] .section-header .pill.chk{
  background: rgba(96,165,250,.16);
  color: #bfdbfe;
}


/* =========================
   3) TABLAS (desktop)
   ========================= */

/* =========================
   TABLAS
   ========================= */
.table-wrap{
  padding:var(--table-pad);
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  scroll-behavior:smooth;
}
.sheet{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  min-width:760px;
}

/* Cabecera sticky */
.sheet thead{
  position:sticky;
  top:var(--thead-top);
  z-index:200;
  background:#fff;
}
.sheet thead::after{
  content:"";
  position:absolute;
  left:0; right:0; bottom:0;
  height:1px;
  background:var(--border);
}
.sheet thead th{
  color:#374151;
  /*text-transform:uppercase;*/
  letter-spacing:.06em;
  font-size:.80rem;
  padding:.5rem .6rem;
  border-bottom:1px solid var(--border);
}

/* Espaciador para que el sticky no tape la primera fila */
.sheet tbody::before{
  content:"";
  display:block;
  height:var(--tbody-offset);
}

.sheet tbody tr{ background:#fff; border-bottom:1px solid var(--border) }
.sheet tbody tr:last-child{ border-bottom:none }
.sheet tbody tr td{ padding:.55rem .6rem; vertical-align:top }

/* Marcador lateral por categoría (JS puede sobreescribir color con --row-accent) */
.sheet tbody tr.row-sed td{ border-left:4px solid var(--row-accent, var(--sed)) }
.sheet tbody tr.row-ant td{ border-left:4px solid var(--row-accent, var(--ant)) }
.sheet tbody tr{ background:var(--row-accent-bg, #fff) }

.sheet tbody tr.group-divider td{ border-top:1.5px dashed #cbd5e1 }

/* Clamp */
.clamped-max{ background:#fee2e2 !important; color:#7f1d1d; border-radius:.3rem; padding:.15rem .25rem }
.clamped-min{ background:#ffedd5 !important; color:#78350f; border-radius:.3rem; padding:.15rem .25rem }

/* Colores por vía: pinta Vía y Dosis/Peso (celda siguiente) */
.sheet tbody td.via-iv,
.sheet tbody td.via-iv + td{ color:var(--via-iv); font-weight:400 }
.sheet tbody td.via-in,
.sheet tbody td.via-in + td{ color:var(--via-in); font-weight:400 }
.sheet tbody td.via-im,
.sheet tbody td.via-im + td{ color:var(--via-im); font-weight:400 }

/* Fondos por columna (como pediste) */
.sheet tbody td.dose{ 
	background:#9FC5E8;
	font-size: 1.2rem;
	font-weight: 700;

}

.sheet tbody td.vol{ 
	background:#9BBB59;
	font-size: 1.2rem;
	font-weight: 700;
}

.sheet tbody td.limits{
	background:#DD7E6B;
	color:#000;
	text-align:center;
	white-space:nowrap;
	font-size: 1rem;
	font-weight: 600;
}

/* Columna “Fármaco” opcional: se oculta salvo modo TODOS (JS añade .show-farmaco) */
#tabla-sedantes .col-farmaco,
#tabla-antidotos .col-farmaco{ display:none }
#tabla-sedantes.show-farmaco .col-farmaco,
#tabla-antidotos.show-farmaco .col-farmaco{ display:table-cell }
#tabla-sedantes.show-farmaco td.col-farmaco,
#tabla-antidotos.show-farmaco td.col-farmaco{
  font-weight:550;
  color:#111827;
  white-space:nowrap;
}
/* ===== SUEROTERAPIA: filas con acento (similar a sed/ant) ===== */

/* Filas de suero: fondo por variable */
.sheet tbody tr.row-sue{
  background: var(--row-accent-bg, rgba(99,102,241,.1)) !important;
}
.sheet tbody tr.row-sue td{
  border-left: 4px solid var(--row-accent, #6366f1);
}


/* Cabecera de grupo en Composición */
.sheet tbody tr.suero-group-row td{
  font-weight: 950;
  text-transform: uppercase;
  letter-spacing: .06em;
  font-size: .78rem;
  color: var(--muted);
  background: rgba(148,163,184,.12);
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}

/* Números alineados a la derecha (si quieres) */
.sheet td.num{ text-align: right; font-variant-numeric: tabular-nums; }

/* Tarjetas tipo “nota” con leve color (rehidratación/deshidrataciones) */
.ck-line.suero-note{
  background: var(--row-accent-bg, rgba(99,102,241,.06));
  border-color: rgba(99,102,241,.25);
}
:root[data-theme="dark"] .ck-line.suero-note{
  background: rgba(255,255,255,.04);
  border-color: rgba(148,163,184,.22);
}


/* Sueroterapia - fila de unidades en thead */
.sheet thead tr.suero-units th{
  text-transform: none;
  letter-spacing: 0;
  font-size: .72rem;
  color: var(--muted);
  font-weight: 800;
  padding-top: .15rem;
  padding-bottom: .45rem;
}

/* Ajuste: thead de suero no debe parecer “doble título” */
.sheet.suero-comp thead th{
  background: transparent;
}


/* =========================
   TABLA: CABECERAS + FILAS
   ========================= */
:root[data-theme="dark"] .table-wrap{
  background: transparent;
}

/* Thead sticky */
:root[data-theme="dark"] .sheet thead{
  background: rgba(15,23,42,.96);
}
:root[data-theme="dark"] .sheet thead th{
  color: rgba(226,232,240,.90);
  border-bottom-color: var(--border);
}

/* Separador inferior del thead */
:root[data-theme="dark"] .sheet thead::after{
  background: var(--border);
}

/* Tbody filas */
:root[data-theme="dark"] .sheet tbody tr{
  background: rgba(15,23,42,.55);
}
:root[data-theme="dark"] .sheet tbody tr td{
  color: rgba(226,232,240,.92);
}

/* Divisor de grupos */
:root[data-theme="dark"] .sheet tbody tr.group-divider td{
  border-top-color: rgba(148,163,184,.35);
}

/* =========================
   MENÚ LATERAL (drawer)
   ========================= */
:root[data-theme="dark"] .side-menu{
  background: rgba(15,23,42,.98);
  border-right-color: var(--border);
}
:root[data-theme="dark"] .menu-item{
  background: rgba(255,255,255,.05);
  border-color: rgba(148,163,184,.22);
  color: rgba(226,232,240,.92);
}
:root[data-theme="dark"] .menu-item:hover{
  background: rgba(255,255,255,.08);
}
:root[data-theme="dark"] .menu-item.is-active{
  background: rgba(96,165,250,.16);
  border-color: rgba(96,165,250,.55);
}

/* Backdrop */
:root[data-theme="dark"] .menu-backdrop{
  background: rgba(0,0,0,.55);
}


:root[data-theme="dark"] .sheet tbody td:first-child{
  color: rgba(226,232,240,.95) !important;
  font-weight: 650;
}

/* =========================================================
   DARK: texto NEGRO en columnas de dosis (mejor contraste)
   ========================================================= */
:root[data-theme="dark"] .sheet tbody td.dose,
:root[data-theme="dark"] .sheet tbody td.vol,
:root[data-theme="dark"] .sheet tbody td.limits{
  color: #000 !important;
}

/* Vista traspuesta (cards) */
:root[data-theme="dark"] .tgrid__cell.dose,
:root[data-theme="dark"] .tgrid__cell.vol,
:root[data-theme="dark"] .tgrid__cell.limits{
  color: #000 !important;
}


* =========================================================
   DARK: modo estrecho - dropdown + cards labels + menú botón
   ========================================================= */

/* Botón hamburguesa en dark */
:root[data-theme="dark"] .menu-btn{
  background: rgba(255,255,255,.06) !important;
  border-color: rgba(148,163,184,.25) !important;
}
:root[data-theme="dark"] .menu-icon,
:root[data-theme="dark"] .menu-icon::before,
:root[data-theme="dark"] .menu-icon::after{
  background: rgba(226,232,240,.92) !important;
}

/* Dropdown de fármacos (móvil/estrecho) */
:root[data-theme="dark"] .drug-dd__btn{
  background: rgba(255,255,255,.06) !important;
  border-color: rgba(148,163,184,.25) !important;
  color: rgba(226,232,240,.92) !important;
}
:root[data-theme="dark"] .drug-dd__label{
  color: rgba(226,232,240,.92) !important;
}
:root[data-theme="dark"] .drug-dd__panel{
  background: rgba(15,23,42,.98) !important;
  border-color: rgba(148,163,184,.25) !important;
}
:root[data-theme="dark"] .drug-dd__opt{
  color: rgba(226,232,240,.92) !important;
}
:root[data-theme="dark"] .drug-dd__opt:hover{
  background: rgba(255,255,255,.07) !important;
}
:root[data-theme="dark"] .drug-dd__opt.is-active{
  background: rgba(96,165,250,.18) !important;
  border-color: rgba(96,165,250,.55) !important;
}

/* Cards: “cabeceras” (etiquetas de la izquierda) en dark */
:root[data-theme="dark"] .tgrid__label{
  background: rgba(2,6,23,.35) !important;
  color: rgba(226,232,240,.88) !important;
  border-top-color: rgba(148,163,184,.22) !important;
}

/* Celdas normales de cards (para no quedar blancas) */
:root[data-theme="dark"] .tgrid__cell{
  background: rgba(15,23,42,.55);
  color: rgba(226,232,240,.92);
  border-top-color: rgba(148,163,184,.18);
}


/* FIX DARK: ck-line debe respetar tema oscuro (no quedarse blanco) */
:root[data-theme="dark"] .ck-line{
  background: rgba(255,255,255,.04) !important;
  border-color: rgba(148,163,184,.22) !important;
}
:root[data-theme="dark"] .ck-line span{
  color: rgba(226,232,240,.92) !important;
}


/* =========================
   4) NAVEGACIÓN (drawer + tabs)
   ========================= */

/* =========================
   MENÚ HAMBURGUESA + DRAWER
   ========================= */
.menu-btn{
  width:44px;
  height:44px;
  border:1px solid var(--border);
  background:#fff;
  border-radius:.75rem;
  display:grid;
  place-items:center;
  cursor:pointer;
}
.menu-btn:active{ transform:scale(.98) }
.menu-btn:focus{ outline:2px solid rgba(37,99,235,.35); outline-offset:2px }

.menu-icon{
  width:18px;
  height:2px;
  background:var(--text);
  border-radius:999px;
  position:relative;
  display:block;
}
.menu-icon::before,
.menu-icon::after{
  content:"";
  position:absolute;
  left:0;
  width:18px;
  height:2px;
  background:var(--text);
  border-radius:999px;
}
.menu-icon::before{ top:-6px }
.menu-icon::after{ top:6px }

.menu-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  z-index:999;
}

.side-menu{
  position:fixed;
  top:0;
  left:0;
  height:100dvh;
  width:min(320px, 85vw);
  background:#fff;
  border-right:1px solid var(--border);
  box-shadow:0 20px 50px rgba(0,0,0,.25);
  z-index:1000;
  transform:translateX(-105%);
  transition:transform .22s ease;
  padding:.75rem;
  display:flex;
  flex-direction:column;
  gap:.5rem;
}
.side-menu.is-open{ transform:translateX(0) }

.side-menu__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:.25rem .25rem .75rem;
  border-bottom:1px solid var(--border);
  margin-bottom:.25rem;
}
.side-menu__title{ font-weight:700; color:var(--text) }
.menu-close{
  width:40px;
  height:40px;
  border:1px solid var(--border);
  background:#fff;
  border-radius:.75rem;
  cursor:pointer;
}

.menu-item{
  width:100%;
  text-align:left;
  padding:.75rem .85rem;
  border-radius:.75rem;
  border:1px solid var(--border);
  background:#fff;
  cursor:pointer;
  font-weight:600;
  color:var(--text);
}
.menu-item:hover{ background:#f3f4f6 }
.menu-item.is-active{
  border-color:rgba(37,99,235,.35);
  background:rgba(37,99,235,.08);
}


.suero-subtabs{
  margin-left:auto;
  display:flex;
  gap:.5rem;
  flex-wrap:nowrap;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
}



[hidden]{ display:none !important }

/* =========================
   PESTAÑAS (DESKTOP)
   ========================= */
.tabs{ display:none; gap:.5rem; margin-top:.75rem }
.tab-item{
  border:1px solid var(--border);
  background:#fff;
  color:var(--text);
  font-weight:700;
  padding:.55rem .85rem;
  border-radius:.75rem;
  cursor:pointer;
}
.tab-item:hover{ background:#f3f4f6 }
.tab-item.is-active{
  border-color:rgba(37,99,235,.45);
  background:rgba(37,99,235,.10);
}

/* Desktop real: pestañas visibles y ocultar drawer */



@media (min-width: 900px) and (pointer: fine){
  .tabs{ display:flex; }               /* ✅ tabs visibles */
  .menu-btn{ display:grid !important; }/* ✅ hamburguesa visible */
  .menu-backdrop{ display:block; }     /* ✅ backdrop disponible (se controla con [hidden]) */
  .side-menu{ display:flex; }          /* ✅ drawer disponible (está off-canvas por transform) */
}




/* Dispositivos táctiles: forzar hamburguesa */
@media (pointer: coarse){
  .tabs{ display:none !important }
  .menu-btn{ display:grid !important }
  .side-menu{ display:flex }
  
  
}

/* =========================
   SUBMENÚ DE FÁRMACOS (BOTONES HORIZONTALES)
   - Se ve en escritorio
   - En ventana estrecha/móvil lo sustituye el dropdown
   ========================= */
.drug-submenu{
  display:flex;
  flex-direction:row;
  align-items:center;
  gap:.5rem;
  padding:.6rem .9rem;
  background:#fff;
  border-bottom:1px solid var(--border);
  flex-wrap:nowrap;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
}

/* Botones: inactivo apagado, activo destacado */
.drug-submenu .menu-item{
  background:#f3f4f6 !important;
  border-color:#d1d5db !important;
  color:#6b7280 !important;
  opacity:.55;
  filter:saturate(.25);
  box-shadow:none !important;
  transform:none;
  transition:background .15s ease, border-color .15s ease, color .15s ease,
             opacity .15s ease, filter .15s ease, box-shadow .15s ease, transform .15s ease;
}
.drug-submenu .menu-item:hover{
  opacity:.75;
  filter:saturate(.35);
  background:#e5e7eb !important;
  border-color:#9ca3af !important;
  color:#4b5563 !important;
}
.drug-submenu .menu-item.is-active{
  opacity:1 !important;
  filter:none !important;
  background:rgba(37,99,235,.18) !important;
  border-color:rgba(37,99,235,.90) !important;
  color:#1f2937 !important;
  box-shadow:0 0 0 3px rgba(37,99,235,.18) !important;
  transform:translateY(-1px);
}
.drug-submenu .menu-item.is-active:hover{
  background:rgba(37,99,235,.24) !important;
  box-shadow:0 0 0 4px rgba(37,99,235,.20) !important;
}

/* =========================
   TABS (pestañas de arriba)
   ========================= */
:root[data-theme="dark"] .tabs .tab-item{
  background: rgba(255,255,255,.06);
  border-color: var(--border);
  color: rgba(226,232,240,.90);
}
:root[data-theme="dark"] .tabs .tab-item:hover{
  background: rgba(255,255,255,.09);
}
:root[data-theme="dark"] .tabs .tab-item.is-active{
  background: rgba(96,165,250,.18);
  border-color: rgba(96,165,250,.65);
  color: #eaf2ff;
}

/* =========================
   SUBMENÚ FÁRMACOS (tiene !important en modo claro)
   => Hay que usar más especificidad + !important
   ========================= */
:root[data-theme="dark"] .drug-submenu{
  background: rgba(2,6,23,.25);
  border-bottom: 1px solid var(--border);
}

/* Inactivos */
:root[data-theme="dark"] .drug-submenu .menu-item{
  background: rgba(255,255,255,.05) !important;
  border-color: rgba(148,163,184,.25) !important;
  color: rgba(226,232,240,.78) !important;
  opacity: .85 !important;
  filter: none !important;
}

/* Hover */
:root[data-theme="dark"] .drug-submenu .menu-item:hover{
  background: rgba(255,255,255,.08) !important;
  border-color: rgba(148,163,184,.35) !important;
  color: rgba(226,232,240,.92) !important;
}

/* Activo */
:root[data-theme="dark"] .drug-submenu .menu-item.is-active{
  background: rgba(96,165,250,.22) !important;
  border-color: rgba(96,165,250,.75) !important;
  color: #eaf2ff !important;
  opacity: 1 !important;
  box-shadow: 0 0 0 3px rgba(96,165,250,.18) !important;
}

/* =========================================================
   DARK: Botón hamburguesa + drawer (forzar colores correctos)
   ========================================================= */

/* Botón hamburguesa */
:root[data-theme="dark"] #menuBtn.menu-btn{
  background: rgba(255,255,255,.06) !important;
  border-color: rgba(148,163,184,.25) !important;
}
:root[data-theme="dark"] #menuBtn .menu-icon,
:root[data-theme="dark"] #menuBtn .menu-icon::before,
:root[data-theme="dark"] #menuBtn .menu-icon::after{
  background: rgba(226,232,240,.92) !important;
}

/* Drawer completo */
:root[data-theme="dark"] #sideMenu.side-menu{
  background: rgba(15,23,42,.98) !important;
  border-right-color: rgba(148,163,184,.22) !important;
}

/* Botones del drawer */
:root[data-theme="dark"] #sideMenu .menu-item{
  background: rgba(255,255,255,.06) !important;
  border-color: rgba(148,163,184,.22) !important;
  color: rgba(226,232,240,.92) !important;
}
:root[data-theme="dark"] #sideMenu .menu-item:hover{
  background: rgba(255,255,255,.09) !important;
}
:root[data-theme="dark"] #sideMenu .menu-item.is-active{
  background: rgba(96,165,250,.18) !important;
  border-color: rgba(96,165,250,.55) !important;
  color: #eaf2ff !important;
}

/* =========================================================
   FIX: Drawer en modo noche - botón cerrar y header del menú
   ========================================================= */

:root[data-theme="dark"] #sideMenu .side-menu__header{
  border-bottom-color: rgba(148,163,184,.22) !important;
}

:root[data-theme="dark"] #menuClose.menu-close{
  background: rgba(255,255,255,.06) !important;
  border-color: rgba(148,163,184,.25) !important;
  color: rgba(226,232,240,.92) !important;
}

:root[data-theme="dark"] #menuClose.menu-close:hover{
  background: rgba(255,255,255,.09) !important;
}

:root[data-theme="dark"] #menuClose.menu-close:active{
  transform: scale(.98);
}


/* =========================
   6) CARDS / VISTA TRASPUESTA (móvil)
   ========================= */

/* =========================================================
   DARK + CARDS con scroll horizontal: sticky left column correcto
   ========================================================= */
:root[data-theme="dark"] .drug-card__body.is-scroll{
  isolation: isolate; /* evita rarezas de z-index con sticky */
}

/* La columna fija (labels) debe ser OPACA y por encima */
:root[data-theme="dark"] .drug-card__body.is-scroll .tgrid__label,
:root[data-theme="dark"] .drug-card__body.is-scroll .tgrid__corner{
  background: rgba(2,6,23,.55) !important;   /* opaco y dark */
  z-index: 80 !important;                   /* por encima del resto */
  box-shadow: 10px 0 14px -12px rgba(0,0,0,.55) !important; /* “corta” lo que pasa por debajo */
}

/* El resto de celdas por debajo en z-index para que no “ganen” */
:root[data-theme="dark"] .drug-card__body.is-scroll .tgrid__cell:not(.tgrid__label):not(.tgrid__corner){
  position: relative;
  z-index: 1;
}

/* =========================================================
   FIX: Cards (modo estrecho) - columna sticky izquierda debe ser OPACA
   para tapar el contenido cuando hay scroll horizontal
   ========================================================= */

/* Asegura contexto de apilado estable */
.drug-card__body.is-scroll{
  isolation: isolate;
}

/* En cualquier tema: la columna fija debe ser opaca */
.drug-card__body.is-scroll .tgrid__label,
.drug-card__body.is-scroll .tgrid__corner{
  position: sticky;
  left: 0;
  z-index: 200 !important;
  background: var(--surface) !important; /* OPACO (clave del problema) */
  box-shadow: 10px 0 14px -12px rgba(15,23,42,.45) !important;
}

/* En tema oscuro: si --surface tiene alpha en algún sitio, lo reforzamos */
:root[data-theme="dark"] .drug-card__body.is-scroll .tgrid__label,
:root[data-theme="dark"] .drug-card__body.is-scroll .tgrid__corner{
  background: #0f172a !important; /* opaco 100% */
  box-shadow: 10px 0 14px -12px rgba(0,0,0,.65) !important;
}

/* El resto de celdas por debajo (para que nunca “ganen” por encima) */
.drug-card__body.is-scroll .tgrid__cell:not(.tgrid__label):not(.tgrid__corner){
  position: relative;
  z-index: 1;
}

/* =========================================================
   CARDS (modo estrecho): borde más visible
   - Día: borde más oscuro
   - Noche: borde más claro
   ========================================================= */

@media (max-width: 900px){

  /* Base (modo día) */
  .drug-card{
    border-width: 1.8px;                 /* un poco más grueso */
    border-color: rgba(17,24,39,.28);    /* gris oscuro suave */
    box-shadow: 0 10px 22px rgba(0,0,0,.06); /* leve para separar */
  }

  /* Si quieres todavía un pelín más marcado en día, usa esto en vez del anterior:
  .drug-card{ border-width: 2px; border-color: rgba(17,24,39,.30); }
  */

  /* Modo noche: borde más claro para que destaque */
  :root[data-theme="dark"] .drug-card{
    border-width: 2px;
    border-color: rgba(226,232,240,.22); /* claro sutil */
    box-shadow:
      0 12px 26px rgba(0,0,0,.35),
      0 0 0 1px rgba(226,232,240,.04);   /* “ring” muy fino */
  }

  /* Extra opcional: refuerzo al hacer scroll horizontal (cuando hay is-scroll) */
  :root[data-theme="dark"] .drug-card__body.is-scroll{
    /* no cambia el borde, solo asegura que se perciba bien */
    scrollbar-color: rgba(226,232,240,.25) transparent;
  }
}


/* Forzar el esquema de controles nativos según el tema de la app */
:root[data-theme="light"]{
  color-scheme: light;
}

:root[data-theme="dark"]{
  color-scheme: dark;
}


/* =========================
   7) CHECKLIST + MODAL
   ========================= */

/* =========================
   CHECKLIST
   ========================= */
   
   
.destacado {
    font-weight: 900;
    font-size: 1.2rem;

  }
  .no_destacado {
    font-weight: 200;
    font-size: 0.90rem;

  }
  


.section-header .pill.chk{
  background: rgba(37,99,235,.10);
  color: #1e40af;
}

.checklist-wrap{
  padding: var(--table-pad);
}

.checklist-title{
  margin: .25rem 0 .85rem;
  font-size: 1.05rem;
  font-weight: 800;
  color: var(--text);
}

.checklist{
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: .5rem;
}

.checklist ul{
  list-style: none;
  margin: .45rem 0 0;
  padding-left: 1.15rem;
  display: grid;
  gap: .35rem;
}

.ck-line{
  display: flex;
  align-items: flex-start;
  gap: .55rem;
  padding: .55rem .65rem;
  border: 1px solid var(--border);
  border-radius: .75rem;
  background: #fff;
  box-shadow: 0 1px 0 rgba(0,0,0,.02);
}

.ck-line span{
  color: var(--text);
  font-weight: 300;
}
#sueroM2Val{
  color: var(--text);
  font-weight: 750;
}

.ck-line input[type="checkbox"]{
  margin-top: .15rem;
  inline-size: 1.05rem;
  block-size: 1.05rem;
  accent-color: var(--accent);
}

/* Padres principales */
.ck-line.ck-top{
  padding: .6rem .7rem;
}

.ck-line.ck-top span{
  font-size: 1.02rem;
  font-weight: 900;
}

/* Desplegables (<details>) */
.ck-group > summary{
  list-style: none;
  cursor: pointer;
}

.ck-group > summary::-webkit-details-marker{ display:none; }

.ck-group > summary .ck-line{
  border-color: rgba(37,99,235,.30);
}

.ck-group > summary .ck-line::after{
  content: "▾";
  margin-left: auto;
  color: rgba(37,99,235,.75);
  transform: rotate(-90deg);
  transition: transform .15s ease;
}

.ck-group[open] > summary .ck-line::after{
  transform: rotate(0deg);
}

/* Hijos en azul solo dentro de grupos */
.ck-group ul .ck-line{
  background: rgba(37,99,235,.04);
  border-color: rgba(37,99,235,.22);
}

.ck-group ul .ck-line span{
  color: var(--accent);
  font-weight: 750;
}

@media (max-width: 760px){
  .ck-line{ padding: .5rem .6rem; }
  .ck-line.ck-top span{ font-size: 1.0rem; }
  
#ckVerifyOverlay{
    padding: .75rem; /* menos margen lateral en móvil */
  }
  #ckVerifyOverlay .ck-modal{
    width: min(560px, calc(100vw - 1.5rem)); /* 2 * .75rem */
  }


}

/* ===== CHECKLIST: VERDE EN MARCADOS + BOTÓN VERIFICACIÓN (override final) ===== */
:root{
  
  
--ok: #16a34a;                 /* verde fuerte */
  --ok-dark: #14532d;            /* texto */
  --ok-bg: rgba(22,163,74,.26);  /* fondo potente */
  --ok-border: rgba(22,163,74,.85); /* borde fuerte */


="checkbox"]{  --ok-bg: rgba(16,185,129,.12);
  accent-color: var(--ok);
}

/* Mantén el AZUL solo cuando NO esté marcado */
#section-checklist details.ck-group ul .ck-line:not(.is-checked){
  background: rgba(37,99,235,.04);
  border-color: rgba(37,99,235,.22);
}
#section-checklist details.ck-group ul .ck-line:not(.is-checked) span{
  color: var(--accent);
  font-weight: 750;
}

/* MARCADO -> VERDE (gana a cualquier azul) */
#section-checklist .ck-line.is-checked{
  background: var(--ok-bg) !important;
  border-color: var(--ok-border) !important;
}
#section-checklist .ck-line.is-checked span{
  color: var(--ok-dark) !important;
  font-weight: 900;
}

/* Padres automáticos: se ven pero no se pueden clicar */
#section-checklist input[type="checkbox"][data-parent="1"]{
  cursor: not-allowed;
}
#section-checklist input[type="checkbox"][data-parent="1"]:disabled{
  opacity: 1;
}

/* Botón Verificación Correcta (por ID, para que SIEMPRE pille estilo) */
#section-checklist .ck-verify-wrap{
  margin-top: .95rem;
  display: flex;
  justify-content: center;
}

#section-checklist #checklistVerifyBtn{
  width: min(560px, 100%);
  text-align: center;
  padding: .95rem 1.1rem;
  border-radius: .95rem;

 border: 2px solid rgba(22,163,74,.90);
background: linear-gradient(135deg, rgba(22,163,74,.40), rgba(22,163,74,.22));
box-shadow: 0 14px 34px rgba(22,163,74,.34), 0 0 0 5px rgba(22,163,74,.22);
  color: var(--ok-dark);

  font-weight: 900;
  font-size: 1.05rem;
  cursor: pointer;

 
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}

#section-checklist #checklistVerifyBtn:hover{
  background: rgba(16,185,129,.22);
  box-shadow: 0 14px 30px rgba(16,185,129,.24);
}

#section-checklist #checklistVerifyBtn:active{
  transform: translateY(1px);
}
/* ===== FIN override ===== */
  --ok-border: rgba(16,185,129,.45);
}

/* Check verde */



/* ===== CHECKLIST: botones RESET estilo pill ===== */

/* pill gris pequeña (para reset) */
#section-checklist .pill-reset{
  margin-left: auto;                 /* empuja a la derecha */
  padding: .14rem .55rem;
  border-radius: 999px;
  border: 1px solid #d1d5db;
  background: #f3f4f6;
  color: #6b7280;
  font-weight: 900;
  font-size: .72rem;
  letter-spacing: .04em;
  cursor: pointer;
  line-height: 1.2;
}

#section-checklist .pill-reset:hover{
  background: #e5e7eb;
  color: #4b5563;
  border-color: #cbd5e1;
}

#section-checklist .pill-reset:active{
  transform: translateY(1px);
}

/* Reset dentro de una fila ck-line (padres) */
#section-checklist .ck-reset-sub{
  margin-left: auto; /* lo manda a la derecha dentro de la fila */
}

/* Para que no “rompa” el layout en filas estrechas */
#section-checklist .ck-line{
  gap: .55rem;
}


/* ===== FIX: RESET a la derecha incluso en <details> ===== */

/* 1) Que el texto ocupe el espacio y empuje los botones */
#section-checklist .ck-line > span{
  flex: 1;                 /* el span se estira */
  min-width: 0;            /* evita desbordes raros */
}

/* 2) El reset SIEMPRE a la derecha dentro de la fila */
#section-checklist .ck-line .ck-reset-sub{
  margin-left: auto;       /* empuja a la derecha */
}

/* 3) La flecha NO debe usar margin-left:auto (si no, se come el hueco) */
#section-checklist details.ck-group > summary .ck-line::after{
  margin-left: .55rem;     /* separación normal */
}

/* (Opcional) Ajuste visual: que el RESET no “rompa” la altura */
#section-checklist .pill-reset{
  align-self: center;
}

/* ===== Verificación Correcta: más separación + más resaltado ===== */

/* 1) Más separación entre el último check y el botón */
#section-checklist .checklist{
  margin-bottom: 1.6rem;   /* separa el botón del último item */
}

/* 2) Separación extra + línea superior suave (opcional, queda muy “pro”) */
#section-checklist .ck-verify-wrap{
  margin-top: 1.2rem;      /* aire adicional */
  padding-top: 1.1rem;
  border-top: 1px dashed rgba(16,185,129,.45);
}

/* 3) Botón más “premium” y llamativo */
#section-checklist #checklistVerifyBtn{
  width: min(640px, 100%);
  padding: 1.05rem 1.25rem;

  font-size: 1.18rem;      /* más grande */
  font-weight: 950;        /* más contundente */

  
border: 2px solid rgba(22,163,74,.90);
background: linear-gradient(135deg, rgba(22,163,74,.40), rgba(22,163,74,.22));
box-shadow: 0 14px 34px rgba(22,163,74,.34), 0 0 0 5px rgba(22,163,74,.22);

}

/* Hover más evidente */
#section-checklist #checklistVerifyBtn:hover{
  background: linear-gradient(
    135deg,
    rgba(16,185,129,.38),
    rgba(16,185,129,.22)
  );
  box-shadow:
    0 18px 44px rgba(16,185,129,.32),
    0 0 0 6px rgba(16,185,129,.22);
}

/* Pulsación sutil al click */
#section-checklist #checklistVerifyBtn:active{
  transform: translateY(2px);
}

@keyframes ckPulseGreen{
  0%   { box-shadow: 0 14px 34px rgba(16,185,129,.28), 0 0 0 0 rgba(16,185,129,.22); }
  70%  { box-shadow: 0 14px 34px rgba(16,185,129,.28), 0 0 0 10px rgba(16,185,129,0); }
  100% { box-shadow: 0 14px 34px rgba(16,185,129,.28), 0 0 0 0 rgba(16,185,129,0); }
}

/* Se aplica cuando el botón deja de estar hidden (es decir, cuando aparece) */
#section-checklist #checklistVerifyBtn{
  animation: ckPulseGreen 1.2s ease-out 1;
  


}

/* =========================================================
   CHECKLIST: MODAL "Verificación Correcta" (overlay)
   ========================================================= */

/* Cuando el modal está abierto, atenúa el checklist */
body.ck-modal-open #section-checklist .checklist-wrap{
  filter: blur(2.5px);
  opacity: .35;
  pointer-events: none; /* evita clicks debajo */
  transition: filter .18s ease, opacity .18s ease;
}

/* Fondo (backdrop) */
#ckVerifyOverlay{
	box-sizing: border-box;
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  padding: 1.25rem;
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(3px);
  z-index: 5000;
}

/* Oculto */
#ckVerifyOverlay[hidden]{
  display: none !important;
}

/* Tarjeta modal (rectángulo) */
#ckVerifyOverlay .ck-modal{
	box-sizing: border-box;
	margin: 0 auto; 
  width: min(560px, calc(100vw - 2.5rem));
  background: #fff;
  border: 1px solid rgba(16,185,129,.45);
  border-radius: 1.1rem;
  box-shadow: 0 26px 70px rgba(0,0,0,.25);
  padding: 1.1rem 1.1rem 1.2rem;
  text-align: center;
}

/* Título y texto */
#ckVerifyOverlay .ck-modal__title{
  margin: .1rem 0 .35rem;
  font-weight: 950;
  font-size: 1.25rem;
  color: #064e3b;
}

#ckVerifyOverlay .ck-modal__sub{
  margin: 0 0 .9rem;
  color: #4b5563;
  font-size: .95rem;
}

/* Botón dentro del modal: más llamativo */
#ckVerifyOverlay #checklistVerifyBtn{
  width: min(420px, 100%);
  padding: 1rem 1.15rem;
  border-radius: .95rem;
  border: 2px solid rgba(16,185,129,.85);
  background: linear-gradient(135deg, rgba(16,185,129,.30), rgba(16,185,129,.18));
  color: #064e3b;
  font-weight: 950;
  font-size: 1.1rem;
  cursor: pointer;
  box-shadow: 0 14px 34px rgba(16,185,129,.28), 0 0 0 5px rgba(16,185,129,.18);
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}

#ckVerifyOverlay #checklistVerifyBtn:hover{
  background: linear-gradient(135deg, rgba(16,185,129,.38), rgba(16,185,129,.22));
  box-shadow: 0 18px 44px rgba(16,185,129,.32), 0 0 0 7px rgba(16,185,129,.22);
}

#ckVerifyOverlay #checklistVerifyBtn:active{
  transform: translateY(2px);
}

/* =========================================================
   CHECKLIST - TEMA OSCURO (mejor contraste y legibilidad)
   Pegar al FINAL de sheet.css
   ========================================================= */

:root[data-theme="dark"]{
  /* Paleta checklist en dark */
  --ck-surface: rgba(15,23,42,.92);        /* fondo tarjetas */
  --ck-line-bg: rgba(255,255,255,.04);     /* fondo líneas no marcadas */
  --ck-line-bd: rgba(148,163,184,.22);     /* borde líneas no marcadas */

  --ck-blue-bg: rgba(96,165,250,.10);      /* hijos (no marcado) */
  --ck-blue-bd: rgba(96,165,250,.30);
  --ck-blue-tx: #bfdbfe;

  /* OK (marcado) - más visible en dark */
  --ck-ok: #22c55e;                        /* verde check */
  --ck-ok-bg: rgba(34,197,94,.22);         /* fondo verde */
  --ck-ok-bd: rgba(34,197,94,.55);         /* borde verde */
  --ck-ok-tx: #dcfce7;                     /* texto claro sobre verde */

  /* Píldoras / botones */
  --ck-pill-bg: rgba(255,255,255,.06);
  --ck-pill-bd: rgba(148,163,184,.22);
  --ck-pill-tx: rgba(226,232,240,.90);
}

/* Contenedor checklist */
:root[data-theme="dark"] #section-checklist .checklist-wrap{
  background: transparent;
}

/* Título */
:root[data-theme="dark"] #section-checklist .checklist-title{
  color: rgba(226,232,240,.95);
}

/* Líneas base (no marcadas) */
:root[data-theme="dark"] #section-checklist .ck-line{
  background: var(--ck-line-bg) !important;
  border-color: var(--ck-line-bd) !important;
}

:root[data-theme="dark"] #section-checklist .ck-line span{
  color: rgba(226,232,240,.92) !important;
}

/* Checkbox (acento) */
:root[data-theme="dark"] #section-checklist input[type="checkbox"]{
  accent-color: var(--ck-ok);
}

/* Hijos en azul cuando NO están marcados */
:root[data-theme="dark"] #section-checklist details.ck-group ul .ck-line:not(.is-checked){
  background: var(--ck-blue-bg) !important;
  border-color: var(--ck-blue-bd) !important;
}
:root[data-theme="dark"] #section-checklist details.ck-group ul .ck-line:not(.is-checked) span{
  color: var(--ck-blue-tx) !important;
  font-weight: 750;
}

/* MARCADO -> verde con texto claro (aquí está el problema principal) */
:root[data-theme="dark"] #section-checklist .ck-line.is-checked{
  background: var(--ck-ok-bg) !important;
  border-color: var(--ck-ok-bd) !important;
}
:root[data-theme="dark"] #section-checklist .ck-line.is-checked span{
  color: var(--ck-ok-tx) !important;
  font-weight: 900;
}

/* Padres automáticos: se ven igual que marcados cuando corresponda */
:root[data-theme="dark"] #section-checklist input[type="checkbox"][data-parent="1"]:disabled{
  opacity: 1;
}

/* Flecha de details en dark */
:root[data-theme="dark"] #section-checklist details.ck-group > summary .ck-line::after{
  color: rgba(191,219,254,.85) !important;
}

/* Botones RESET (pills) en dark */
:root[data-theme="dark"] #section-checklist .pill-reset{
  background: var(--ck-pill-bg) !important;
  border-color: var(--ck-pill-bd) !important;
  color: var(--ck-pill-tx) !important;
}
:root[data-theme="dark"] #section-checklist .pill-reset:hover{
  background: rgba(255,255,255,.10) !important;
}

/* Botón Verificación Correcta (si lo usas) en dark */
:root[data-theme="dark"] #section-checklist #checklistVerifyBtn{
  border-color: rgba(34,197,94,.60) !important;
  background: linear-gradient(135deg, rgba(34,197,94,.26), rgba(34,197,94,.16)) !important;
  color: #dcfce7 !important;
}

/* Modal de verificación: que no quede “blanco” en dark */
:root[data-theme="dark"] #ckVerifyOverlay{
  background: rgba(0,0,0,.55) !important;
}
:root[data-theme="dark"] #ckVerifyOverlay .ck-modal{
  background: rgba(15,23,42,.98) !important;
  border-color: rgba(34,197,94,.35) !important;
}
:root[data-theme="dark"] #ckVerifyOverlay .ck-modal__title{
  color: #dcfce7 !important;
}
:root[data-theme="dark"] #ckVerifyOverlay .ck-modal__sub{
  color: rgba(226,232,240,.78) !important;
}

/* =========================================================
   CHECKLIST (DARK): texto del botón "Verificación Correcta" en el MODAL
   ========================================================= */

:root[data-theme="dark"] #ckVerifyOverlay #checklistVerifyBtn{
  color: #ffffff !important;                  /* texto blanco */
  -webkit-text-fill-color: #ffffff !important;/* iOS/Safari a veces “apaga” el texto */
  font-weight: 950 !important;
  letter-spacing: .02em;

  /* Mantén el verde, pero con contraste suficiente */
  background: linear-gradient(
    135deg,
    rgba(34,197,94,.32),
    rgba(34,197,94,.20)
  ) !important;

  border-color: rgba(34,197,94,.70) !important;

  /* Un poco de “glow” para que destaque */
  box-shadow:
    0 16px 42px rgba(0,0,0,.35),
    0 0 0 6px rgba(34,197,94,.18) !important;
}

/* Hover/active (si aplica) */
:root[data-theme="dark"] #ckVerifyOverlay #checklistVerifyBtn:hover{
  background: linear-gradient(
    135deg,
    rgba(34,197,94,.40),
    rgba(34,197,94,.24)
  ) !important;
}

:root[data-theme="dark"] #ckVerifyOverlay #checklistVerifyBtn:active{
  transform: translateY(1px);
}


/* =========================
   8) MISC / OTROS
   ========================= */

/* sheet.css v20260126-1  */

/**
 * sheet.css
 * ----------------
 * Hoja de estilos
 */

:root{
  --bg:#f7fafc;
  --surface:#ffffff;
  --text:#1f2937;
  --muted:#4b5563;
  --accent:#2563eb;
  --border:#e5e7eb;

  --sed:#10b981;
  --ant:#f59e0b;

  /* Sticky header/theads: JS recalcula estas variables */
  --thead-top: 64px;      /* altura del header */
  --thead-height: 40px;   /* altura del thead */
  --tbody-offset: 104px;  /* header + thead */
  --table-pad: .75rem;

  /* Colores por vía */
  --via-iv:#C00000;
  --via-in:#3072C2;
  --via-im:#6CA62C;
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

/* =========================================================
   Indicador de peso activo (siempre visible en header)
   ========================================================= */
.peso-badge{
  margin-left: .75rem;
  padding: .35rem .65rem;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(37,99,235,.10);
  color: var(--text);
  font-weight: 800;
  font-size: .85rem;
  white-space: nowrap;
}

/* En móvil, que el badge no “reviente” */
@media (max-width: 760px){
  .peso-badge{
    font-size: .80rem;
    max-width: 60vw;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

/* =========================================================
   Peso bloqueado (feedback visual)
   ========================================================= */
.peso-box.is-locked input{
  opacity: .9;
  filter: saturate(.85);
}

.peso-box.is-locked #pesoLockBtn{
  border-color: rgba(16,185,129,.55);
  background: rgba(16,185,129,.14);
}


/* =========================
   9) TEMA / DARK / ACCESIBILIDAD
   ========================= */

/* =========================================================
   UI: botón icono (tema + lock)
   ========================================================= */
.icon-btn{
  width: 44px;
  height: 44px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.65);
  color: var(--text);
  border-radius: .75rem;
  display: grid;
  place-items: center;
  cursor: pointer;
}

:root[data-theme="dark"] .icon-btn{
  background: rgba(15,23,42,.65);
}

.icon-btn:active{
  transform: scale(.98);
}

/* =========================================================
   PARCHE TEMA OSCURO (overrides sobre colores hardcodeados)
   Pegar al FINAL de sheet.css
   ========================================================= */

:root[data-theme="dark"]{
  color-scheme: dark;

  /* Ajusta si quieres */
  --bg:#0b1220;
  --surface:#0f172a;
  --surface-2:#0b1429;
  --text:#e5e7eb;
  --muted:#a1a1aa;
  --accent:#60a5fa;
  --border: rgba(148,163,184,.22);
}

/* Fondo general */
:root[data-theme="dark"] body{
  background: var(--bg);
  color: var(--text);
}

/* =========================
   PESO (label + input + caja)
   ========================= */
:root[data-theme="dark"] .peso-box{
  background: rgba(255,255,255,.06);
  border-color: rgba(148,163,184,.25);
}
:root[data-theme="dark"] .peso-box label{
  color: rgba(226,232,240,.85);
}
:root[data-theme="dark"] .peso-box input{
  background: rgba(2,6,23,.55);
  border-color: rgba(148,163,184,.25);
  color: var(--text);
}
:root[data-theme="dark"] .peso-box input::placeholder{
  color: rgba(226,232,240,.45);
}

/* Botones icono (theme + lock) que no se vean “lavados” */
:root[data-theme="dark"] .icon-btn{
  background: rgba(255,255,255,.06);
  border-color: rgba(148,163,184,.25);
  color: var(--text);
}
:root[data-theme="dark"] .icon-btn:hover{
  background: rgba(255,255,255,.09);
}

/* Badge de peso */
:root[data-theme="dark"] .peso-badge{
  background: rgba(96,165,250,.14);
  border-color: rgba(96,165,250,.35);
  color: #eaf2ff;
}

/* =========================
   SPLASH / PANTALLA DE CARGA
   ========================= */

.splash{
  position: fixed;
  inset: 0;
  z-index: 99999;
  display: grid;
  place-items: center;
  background: rgba(255,255,255,.92);
  backdrop-filter: blur(8px) saturate(1.1);
}

:root[data-theme="dark"] .splash{
  background: rgba(15,23,42,.92);
}

.splash__card{
  width: min(420px, calc(100vw - 2rem));
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: 1.2rem;
  box-shadow: 0 20px 60px rgba(0,0,0,.20);
  padding: 1.25rem 1.25rem 1.15rem;
  text-align: center;
}

.splash__title{
  font-weight: 950;
  letter-spacing: .02em;
  font-size: 1.2rem;
  margin-bottom: .25rem;
}

.splash__subtitle{
  color: var(--muted);
  font-weight: 700;
  margin-bottom: .9rem;
}

.splash__bar{
  height: 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  overflow: hidden;
  background: rgba(37,99,235,.10);
}

.splash__barFill{
  height: 100%;
  width: 40%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(37,99,235,.35), rgba(37,99,235,.85));
  animation: splashMove 2.0s ease-in-out infinite;
}

@keyframes splashMove{
  0%{ transform: translateX(-110%); }
  50%{ transform: translateX(50%); }
  100%{ transform: translateX(220%); }
}

.splash__hint{
  margin-top: .8rem;
  color: var(--muted);
  font-size: .9rem;
  font-weight: 650;
}


/* Sueroterapia: dropdown subtabs (móvil) */
.suero-dd{ display:none; margin-left:auto; position:relative; }

@media (max-width: 900px){
  /* Header suero: permitir wrap */
  #section-sueroterapia .section-header--with-filter{
    display:flex;
    flex-wrap: wrap;
    gap:.6rem;
  }

  /* Oculta subtabs horizontales y muestra dropdown */
  #section-sueroterapia .suero-subtabs{ display:none !important; }
  #section-sueroterapia .suero-dd{ display:block !important; width:100%; }

  #section-sueroterapia .suero-dd .drug-dd__btn{
    width: 100%;
    justify-content: space-between;
  }
}

/* Caja compacta suero (para Rehidratación rápida) */
.suero-box{
  border: 1px solid var(--border);
  border-radius: .95rem;
  padding: .85rem .95rem;
  background: var(--surface);
}
:root[data-theme="dark"] .suero-box{
  background: rgba(255,255,255,.04);
}

/* Lista compacta dentro de la caja */
.suero-box ul{
  margin: .4rem 0 0;
  padding-left: 1.1rem;
  display: grid;
  gap: .35rem;
}

/* Tarjeta compacta por tipo de deshidratación */
.suero-card{
  border: 1px solid var(--border);
  border-radius: .95rem;
  background: var(--surface);
  padding: .8rem .95rem;
}
:root[data-theme="dark"] .suero-card{
  background: rgba(255,255,255,.04);
}
.suero-card__title{
  font-weight: 950;
  margin: 0 0 .45rem;
}
.suero-card ul{
  margin: 0;
  padding-left: 1.1rem;
  display:grid;
  gap:.35rem;
}

/* SUEROTERAPIA - CÁLCULO: sin scroll horizontal y tabla fluida */
#section-sueroterapia #sueroTablaVolumenes.sheet{
  min-width: 0 !important;     /* anula el min-width global de .sheet */
  width: 100%;
  table-layout: fixed;         /* obliga a encajar columnas */
}

#section-sueroterapia #sueroTablaVolumenes th,
#section-sueroterapia #sueroTablaVolumenes td{
  overflow: hidden;
  text-overflow: ellipsis;
}

#section-sueroterapia #sueroTablaVolumenes th:nth-child(1),
#section-sueroterapia #sueroTablaVolumenes td:nth-child(1){
  width: 52%;
  white-space: normal;         /* que el “Tipo” pueda partir en 2 líneas */
}

#section-sueroterapia #sueroTablaVolumenes th:nth-child(2),
#section-sueroterapia #sueroTablaVolumenes td:nth-child(2),
#section-sueroterapia #sueroTablaVolumenes th:nth-child(3),
#section-sueroterapia #sueroTablaVolumenes td:nth-child(3){
  width: 24%;
  white-space: nowrap;         /* números siempre en una línea */
  text-align: right;
  font-variant-numeric: tabular-nums;
}

/* evita que el contenedor intente hacer scroll */
#section-sueroterapia #suero-calculo .table-wrap{
  overflow-x: hidden !important;
}

/* SUEROTERAPIA - COMPOSICIÓN: responsive sin scroll (convierte a cards) */
@media (max-width: 640px){
  #section-sueroterapia table.suero-comp{
    min-width: 0 !important;
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
  }

  #section-sueroterapia table.suero-comp thead{
    display: none; /* ocultamos cabecera en móvil */
  }

  #section-sueroterapia table.suero-comp tbody,
  #section-sueroterapia table.suero-comp tr,
  #section-sueroterapia table.suero-comp td{
    display: block;
  }

  #section-sueroterapia table.suero-comp tr{
    margin: 0 0 .7rem;
    padding: .75rem .85rem;
    border: 1px solid var(--border);
    border-radius: .95rem;
    background: var(--row-accent-bg, rgba(99,102,241,.10));
  }

  #section-sueroterapia table.suero-comp td{
    padding: .35rem 0;
    border: none;
  }

  #section-sueroterapia table.suero-comp td::before{
    content: attr(data-label);
    display: block;
    font-size: .72rem;
    font-weight: 900;
    letter-spacing: .05em;
    /*text-transform: uppercase;*/
    color: var(--muted);
    margin-bottom: .15rem;
  }

  #section-sueroterapia table.suero-comp td.num{
    text-align: left;
  }
}

/* Contenedor “más oscuro” en modo día */
:root:not([data-theme="dark"]) #suero-rehidratacion{
  background: #e5e7eb;           /* gris claro visible */
  border: 1px solid #d1d5db;
  border-radius: 1rem;
  padding: .85rem;
}

/* Caja interior (info) */
#suero-rehidratacion .suero-box{
  background: #fff;
}

/* Sin puntos negros + estilo compacto */
#suero-rehidratacion .suero-box ul{
  list-style: none;
  padding-left: 0;
  margin: .45rem 0 0;
}

#suero-rehidratacion .suero-box li + li{
  border-top: 1px solid var(--border);
  margin-top: .35rem;
  padding-top: .35rem;
}

:root[data-theme="dark"] #section-sueroterapia .suero-box{
  background: rgba(255,255,255,.04);
  border-color: rgba(148,163,184,.22);
}
:root[data-theme="dark"] #section-sueroterapia .suero-box{
  color: rgba(226,232,240,.92);
}

:root:not([data-theme="dark"]) #suero-deshidrataciones{
  background: #e5e7eb;
  border: 1px solid #d1d5db;
  border-radius: 1rem;
  padding: .85rem;
}

/* Quitar puntos */
#suero-deshidrataciones ul{
  list-style: none;
  padding-left: 0;
  margin: .45rem 0 0;
}

/* Separadores en vez de bullets */
#suero-deshidrataciones li + li{
  border-top: 1px solid var(--border);
  margin-top: .35rem;
  padding-top: .35rem;
}

@media (max-width: 900px){
  #section-sueroterapia .suero-subtabs{ display:none !important; }
  #section-sueroterapia .suero-dd{ display:block !important; width:100%; }
}
/* ===== SUEROTERAPIA: 1ª columna sticky en tablas de composición ===== */
#section-sueroterapia table.suero-comp{
  border-collapse: separate;
  border-spacing: 0;
}

/* Sticky solo para la columna "Suero" */
#section-sueroterapia table.suero-comp th:first-child,
#section-sueroterapia table.suero-comp td:first-child{
  position: sticky;
  left: 0;
  z-index: 30;
  background: var(--surface);
  box-shadow: 10px 0 14px -12px rgba(15,23,42,.35);
}

/* En dark, asegúrate de fondo opaco */
:root[data-theme="dark"] #section-sueroterapia table.suero-comp th:first-child,
:root[data-theme="dark"] #section-sueroterapia table.suero-comp td:first-child{
  background: #0f172a; /* opaco */
}

/* La fila de unidades también debe respetar sticky si la usas */
#section-sueroterapia table.suero-comp thead tr.suero-units th:first-child{
  z-index: 40;
}


/* Pill botón plegar */
#section-sueroterapia .suero-pill-toggle{
  cursor: pointer;
}
#section-sueroterapia .suero-pill-toggle:active{
  transform: translateY(1px);
}

/* =========================
   MENÚ Opción C: sidebar fijo en desktop
   ========================= 
@media (min-width: 900px) and (pointer: fine){
  /* Oculta tabs superiores (módulo y sedo)
  .tabs{ display: none !important; }

  /* Muestra el sidebar SIEMPRE
  #sideMenu.side-menu{
    display: flex !important;
    transform: none !important;
    left: 0;
    top: 0;
    bottom: 0;
    height: 100dvh;
  }

  /* Quita el backdrop y el botón hamburguesa en desktop 
  .menu-backdrop{ display: none !important; }
  #menuBtn.menu-btn{ display: none !important; }

  /* Deja espacio para el sidebar 
  .app-header{ margin-left: 320px; }
  main{ margin-left: 320px; }

  /* Opcional: que el header no quede “centrado raro” 
  main{ max-width: 1100px; }
}*/

.nav-group > summary{
  list-style: none;
  cursor: pointer;
  font-weight: 900;
  padding: .5rem .65rem;
  border-radius: .75rem;
  color: var(--text);
}
.nav-group > summary::-webkit-details-marker{ display:none; }
.nav-group > summary::after{
  content: "▾";
  float: right;
  opacity: .7;
  transform: rotate(-90deg);
  transition: transform .15s ease;
}
.nav-group[open] > summary::after{ transform: rotate(0deg); }

/* Sueroterapia: pills plegables (compactas, NO full width) */
#section-sueroterapia .suero-pill-toggle{
  display: inline-flex;
  align-items: center;
  gap: .5rem;
 
	width: fit-content;       /* ✅ ancho del contenido */
  max-width: 100%;
  align-self: flex-start;

  padding: .35rem .7rem;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(99,102,241,.10);
  color: var(--text);
  font-weight: 900;
  cursor: pointer;
  user-select: none;
  margin: .6rem 0 .45rem;
}

#section-sueroterapia .suero-pill-toggle::after{
  content: "▾";
  opacity: .8;
  transform: rotate(-90deg);
  transition: transform .15s ease;
}

#section-sueroterapia .suero-pill-toggle[aria-expanded="true"]::after{
  transform: rotate(0deg);
}

/* Dark */
:root[data-theme="dark"] #section-sueroterapia .suero-pill-toggle{
  background: rgba(99,102,241,.14);
  border-color: rgba(148,163,184,.22);
  color: rgba(226,232,240,.92);
  
 /* ✅ 2 líneas extra “premium” */
  background: linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.03));
  box-shadow: 0 14px 10px rgba(0,0,0,.45), 0 0 0 4px color-mix(in srgb, var(--comp-accent, #6366f1) 35%, transparent);

}
/* Composición: contenedor de tabla con scroll controlado */
#sueroCompTables .suero-comp-wrap{
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border: 1px solid var(--border);
  border-radius: .95rem;
  background: var(--surface);
  padding: .35rem;
}

/* La tabla de composición no debe forzar min-width global */
#sueroCompTables table.suero-comp.sheet{
  min-width: 0 !important;
  width: 100%;
}
:root[data-theme="dark"] #sueroCompTables .suero-comp-wrap{
  background: rgba(255,255,255,.04);
  border-color: rgba(148,163,184,.22);
}

/* Composición: sección con acento */
#sueroCompTables .suero-comp-section{
  border-radius: 1rem;
}

/* Pill: compacta y con color por componente */
#section-sueroterapia .suero-pill-toggle{
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  width: fit-content;
  max-width: 100%;
  padding: .35rem .7rem;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--comp-accent, var(--border)) 55%, var(--border));
  background: color-mix(in srgb, var(--comp-bg, rgba(99,102,241,.10)) 70%, transparent);
  color: var(--text);
  font-weight: 900;
}

#section-sueroterapia .suero-pill-toggle::after{
  content: "▾";
  opacity: .8;
  transform: rotate(-90deg);
  transition: transform .15s ease;
}
#section-sueroterapia .suero-pill-toggle[aria-expanded="true"]::after{
  transform: rotate(0deg);
}

/* Wrap tabla: borde/fondo por componente + scroll controlado */
#sueroCompTables .suero-comp-wrap{
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border: 1px solid color-mix(in srgb, var(--comp-accent, var(--border)) 35%, var(--border));
  border-radius: .95rem;
  background: color-mix(in srgb, var(--comp-bg, rgba(99,102,241,.08)) 40%, var(--surface));
  padding: .35rem;
}

/* La tabla de composición no debe forzar min-width global */
#sueroCompTables table.suero-comp.sheet{
  min-width: 0 !important;
  width: 100%;
}

/* Dark: refuerzo de contraste (manteniendo tu tema) */
:root[data-theme="dark"] #sueroCompTables .suero-comp-wrap{
  background: color-mix(in srgb, var(--comp-bg, rgba(99,102,241,.14)) 35%, rgba(15,23,42,.98));
  border-color: rgba(148,163,184,.22);
}


/* =========================
   SUERO - COMPOSICIÓN: color por componente
   ========================= */

/* Pill compacta (ancho corto) */
#section-sueroterapia .suero-pill-toggle{
  display: inline-flex;
  align-items: center;
  gap: .5rem;

  width: fit-content;     /* ✅ NO full width */
  max-width: 100%;

  padding: .35rem .7rem;
  border-radius: 999px;

  border: 1px solid var(--border);
  background: var(--comp-bg, rgba(99,102,241,.10));
  color: var(--text);
  font-weight: 900;
  cursor: pointer;
  user-select: none;
}

#section-sueroterapia .suero-pill-toggle::after{
  content: "▾";
  opacity: .8;
  transform: rotate(-90deg);
  transition: transform .15s ease;
}
#section-sueroterapia .suero-pill-toggle[aria-expanded="true"]::after{
  transform: rotate(0deg);
}

/* Caja de la tabla */
#sueroCompTables .suero-comp-wrap{
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;

  border: 1px solid var(--border);
  border-left: 4px solid var(--comp-accent, #6366f1);

  border-radius: .95rem;
  background: var(--surface);
  padding: .35rem;
}

/* La tabla de composición NO debe heredar min-width global */
#sueroCompTables table.suero-comp.sheet{
  min-width: 0 !important;
  width: 100%;
}

/* Dark: mantiene legibilidad */
:root[data-theme="dark"] #sueroCompTables .suero-comp-wrap{
  background: rgba(255,255,255,.04);
  border-color: rgba(148,163,184,.22);
}
/* =========================
   SUERO - pills con color en DARK
   ========================= */
:root[data-theme="dark"] #section-sueroterapia .suero-pill-toggle{
  /* usa el color del componente */
  border-color: color-mix(in srgb, var(--comp-accent, #6366f1) 60%, rgba(148,163,184,.25));
  color: rgba(226,232,240,.94);

  /* ✅ color + gradiente (premium) */
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--comp-accent, #6366f1) 22%, rgba(2,6,23,.25)),
    color-mix(in srgb, var(--comp-bg, rgba(99,102,241,.22)) 55%, rgba(2,6,23,.55))
  );

  /* ✅ glow suave por componente */
  box-shadow:
    0 14px 34px rgba(0,0,0,.45),
    0 0 0 4px color-mix(in srgb, var(--comp-accent, #6366f1) 35%, transparent);
}

/* Hover: un poco más vivo */
:root[data-theme="dark"] #section-sueroterapia .suero-pill-toggle:hover{
  box-shadow:
    0 18px 44px rgba(0,0,0,.55),
    0 0 0 5px color-mix(in srgb, var(--comp-accent, #6366f1) 45%, transparent);
}


/* Unidades pequeñas al lado de números (suero) */
#section-sueroterapia .unit{
  font-size: .78em;
  font-weight: 500;
  opacity: .75;
  margin-left: .35rem;
  color: var(--muted);
  white-space: nowrap;
}
:root[data-theme="dark"] #section-sueroterapia .unit{
  color: rgba(226,232,240,.72);
}
/* =========================
   FIX: Sueroterapia sin “espaciador” de tbody (evita huecos en móvil)
   ========================= */
#section-sueroterapia .sheet tbody::before{
  content: none !important;
  display: none !important;
  height: 0 !important;
}

/* SUEROTERAPIA - CÁLCULO: dar más ancho a cc/día y ml/h */
#section-sueroterapia #sueroTablaVolumenes th:nth-child(1),
#section-sueroterapia #sueroTablaVolumenes td:nth-child(1){
  width: 44% !important;   /* antes ~52% */
}

#section-sueroterapia #sueroTablaVolumenes th:nth-child(2),
#section-sueroterapia #sueroTablaVolumenes td:nth-child(2),
#section-sueroterapia #sueroTablaVolumenes th:nth-child(3),
#section-sueroterapia #sueroTablaVolumenes td:nth-child(3){
  width: 28% !important;   /* antes ~24% */
}